const translations = {
  hy: {
    company: { name: "TITANYAN Acc & Internal Audit" },
    nav: {
      services: "Ծառայություններ",
      about: "Մեր Մասին",
      contact: "Կապ",
    },
    hero: {
      taglinePrimary: "Հաշվապահություն և Ներքին Աուդիտ",
      taglineSecondary: "Ձեր վստահելի ֆինանսական խորհրդատուները",
      description:
        "Ընկերությունը ծառայությունները մատուցում է ՀՀ-ում որակավորված և միջազգային որակավորում ունեցող մասնագետների կողմից։",
      cta: "Կապ հաստատել",
      founderBadge: "Հիմնադիր՝ Արամ Տիտանյան",
      founderTitle: "Հիմնադիր և ֆինանսական խորհրդատու",
    },
    testimonials: {
      kicker: "",
      heading: "Հաճախորդների կարծիքներ",
      subheading: "",
      items: [
        {
          name: "Մարիամ Հակոբյան",
          role: "Ֆինանսական տնօրեն, տեխնոլոգիական ընկերություն",
          quote:
            "Արամը պահպանում է կարգապահ հաշվապահություն և միշտ հիշեցնում կարևոր ժամկետների մասին։ Վստահում եմ նրան առանց երկրորդ մտքի։",
        },
        {
          name: "Սերգեյ Ավետիսյան",
          role: "Հիմնադիր, արտադրական բիզնես",
          quote:
            "Մշտապես հասանելի է և բաց է շփման մեջ։ Բարդ հարկային հարցերը բացատրում է պարզ լեզվով և առաջարկում է գործնական լուծումներ։",
        },
        {
          name: "Աննա Հարությունյան",
          role: "Գործառնական ղեկավար, ծառայությունների ոլորտ",
          quote:
            "Ժամանակին հաշվետվություններ, հստակ գործընթացներ և զրոյական անակնկալներ։ Նրա թիմը մեր ֆինանսական հենարանն է։",
        },
      ],
    },
    services: {
      heading: "Ծառայություններ",
      subheading:
        "Համապարփակ ֆինանսական լուծումներ ձեր կազմակերպության համար",
      items: [
        {
          title: "Հաշվապահական հաշվառում",
          description: "Լիարժեք հաշվապահական աջակցություն բոլոր ոլորտների համար",
        },
        {
          title: "Հարկային եւ հաշվապահական խորհրդատվություն",
          description: "Գործնական խորհուրդներ հարկային և իրավական համապատասխանության համար",
        },
        {
          title: "Հարկերի, ՏՊՀ-երի պլանավորում եւ Հաշվարկում",
          description: "Հարկային պլանավորում, կանխատեսում և հաշվարկների ավտոմատացում",
        },
        {
          title: "Ֆինանսական հաշվետվություններ կազմում",
          description: "ՀԱՊՀ և միջազգային չափանիշներին համապատասխան հաշվետվություններ",
        },
        {
          title: "Պետական գրանցման կազմակերպում",
          description: "Գրանցման ամբողջական ընթացակարգի կառավարում",
        },
        {
          title: "Կանոնային գործավարություն",
          description: "Փաստաթղթաշրջանառության կարգավորում և պահպանում",
        },
        {
          title: "Ներքին Աուդիտի իրականացում",
          description: "Հսկողության և ռիսկերի գնահատման արդյունավետ համակարգ",
        },
      ],
    },
    about: {
      heading: "Մեր մասին",
      description:
        "TITANYAN Acc & Internal Audit-ը մասնագիտացած է Հայաստանի Հանրապետության տարածքում հաշվապահական հաշվառման և ներքին աուդիտի բարձրակարգ ծառայությունների մատուցման մեջ։ Մեր թիմը բաղկացած է տեղական և միջազգային որակավորում ունեցող մասնագետներից, ովքեր ապահովում են ճշգրիտ հաշվառում, հարկային համապատասխանություն և թափանցիկ ֆինանսական հաշվետվություն։",
      highlight1: "Ծառայություններ պետական և մասնավոր հատվածի համար",
      highlight2: "Շեշտադրում ֆինանսական վերահսկողության և թափանցիկության վրա",
      highlight3: "Անձնավորացված մոտեցում յուրաքանչյուր հաճախորդի համար",
    },
    founder: {
      name: "Արամ Տիտանյան",
      heading: "Հիմնադրի խոսքը",
      role: "Հիմնադիր, TITANYAN Acc & Internal Audit LLC",
      bio: "Արամ Տիտանյանը ղեկավարում է ընկերությունը՝ կենտրոնանալով կարգապահ հաշվապահության, ներքին աուդիտի և գործնական խորհրդատվության վրա Հայաստանի կազմակերպությունների համար։ Նա հաճախորդների հետ միասին մշակում է համապատասխան գործընթացներ և թափանցիկ հաշվետվություններ։",
      quote:
        "«Հաշվապահությունը՝ բիզնեսի անտեսանելի ուժն է, որը պաշտպանում է ձեզ անսպասելի կորուստներից»",
      cta: "Պայմանավորել հանդիպում",
    },
    contact: {
      heading: "Կապ",
      addressLabel: "Հասցե",
      addressValue: "ք․ Երևան, Արշակունյաց 5, Yerevan, Armenia",
      phoneLabel: "Հեռ․",
      emailLabel: "Էլ. հասցե",
    },
    footer: {
      copyright:
        "© {{year}} TITANYAN Acc & Internal Audit. Բոլոր իրավունքները պաշտպանված են։",
    },
  },
  en: {
    company: { name: "TITANYAN Acc & Internal Audit" },
    nav: {
      services: "Services",
      about: "About",
      contact: "Contact",
    },
    hero: {
      taglinePrimary: "Accounting & Internal Audit",
      taglineSecondary: "Trusted financial advisors in Armenia",
      description:
        "Services delivered in Armenia by professionals with local and international certifications.",
      cta: "Contact Us",
      founderBadge: "Founder-led: Aram Titanyan",
      founderTitle: "Founder & Lead Advisor",
    },
    testimonials: {
      kicker: "",
      heading: "Testimonials",
      subheading: "",
      items: [
        {
          name: "Mariam Hakobyan",
          role: "CFO, Tech company",
          quote:
            "Aram keeps disciplined books and proactively flags deadlines. I trust him without a second thought.",
        },
        {
          name: "Sergey Avetisyan",
          role: "Founder, Manufacturing",
          quote:
            "Always available and transparent. He explains complex tax topics clearly and offers practical options.",
        },
        {
          name: "Anna Harutyunyan",
          role: "Operations Lead, Services",
          quote:
            "On-time reports, clear processes, and zero surprises. His team is our financial backbone.",
        },
      ],
    },
    services: {
      heading: "Services",
      subheading:
        "Comprehensive financial solutions tailored to your organization",
      items: [
        {
          title: "Accounting Services",
          description: "End-to-end bookkeeping and financial recording",
        },
        {
          title: "Tax & Accounting Consulting",
          description: "Strategic advice to ensure full tax compliance",
        },
        {
          title: "Tax Planning & Calculations",
          description: "Forward-looking tax planning and precise calculations",
        },
        {
          title: "Financial Reporting",
          description: "Statements prepared under local and international standards",
        },
        {
          title: "Business Registration",
          description: "Complete support with statutory registrations",
        },
        {
          title: "Document Management",
          description: "Organized process control for all corporate records",
        },
        {
          title: "Internal Audit",
          description: "Robust assessment of controls and risk management",
        },
      ],
    },
    about: {
      heading: "About Us",
      description:
        "TITANYAN Acc & Internal Audit delivers top-tier accounting and internal audit services across Armenia. Our team combines local expertise with internationally certified specialists to ensure accuracy, tax compliance, and transparent financial reporting for every client.",
      highlight1: "Serving both public and private sector organizations",
      highlight2: "Focused on oversight, compliance, and transparency",
      highlight3: "Personalized guidance for each client engagement",
    },
    founder: {
      name: "Aram Titanyan",
      heading: "Founder’s note",
      role: "Founder, TITANYAN Acc & Internal Audit LLC",
      bio: "Aram leads the firm with a focus on disciplined accounting, internal audit, and practical advisory for organizations across Armenia. He works side-by-side with clients to build compliant processes and clear reporting.",
      quote:
        "“Accounting is the invisible force of business that protects you from unexpected losses.”",
      cta: "Book a consultation",
    },
    contact: {
      heading: "Contact",
      addressLabel: "Address",
      addressValue: "Yerevan, Arshakunyats 5, Armenia",
      phoneLabel: "Phone",
      emailLabel: "Email",
    },
    footer: {
      copyright:
        "© {{year}} TITANYAN Acc & Internal Audit. All rights reserved.",
    },
  },
  ru: {
    company: { name: "TITANYAN Acc & Internal Audit" },
    nav: {
      services: "Услуги",
      about: "О нас",
      contact: "Контакты",
    },
    hero: {
      taglinePrimary: "Бухгалтерия и Внутренний Аудит",
      taglineSecondary: "Ваши надежные финансовые консультанты",
      description:
        "Услуги в Армении предоставляются квалифицированными специалистами с местными и международными сертификатами.",
      cta: "Связаться",
      founderBadge: "Основатель: Арам Титанян",
      founderTitle: "Основатель и ведущий консультант",
    },
    testimonials: {
      kicker: "",
      heading: "Отзывы",
      subheading: "",
      items: [
        {
          name: "Мариам Акопян",
          role: "Финансовый директор, тех-компания",
          quote:
            "Арам ведет учет дисциплинированно и заранее напоминает о сроках. Полностью ему доверяю.",
        },
        {
          name: "Сергей Аветисян",
          role: "Основатель, производство",
          quote:
            "Всегда на связи и открыт. Понятно объясняет сложные налоговые вопросы и предлагает рабочие решения.",
        },
        {
          name: "Анна Арутюнян",
          role: "Операционный руководитель, услуги",
          quote:
            "Своевременная отчетность, понятные процессы и никаких сюрпризов. Его команда — наш финансовый оплот.",
        },
      ],
    },
    services: {
      heading: "Услуги",
      subheading:
        "Комплексные финансовые решения для вашей организации",
      items: [
        {
          title: "Бухгалтерский учет",
          description: "Полное ведение бухгалтерии для любого бизнеса",
        },
        {
          title: "Налоговое консультирование",
          description: "Практические советы по налогам и отчетности",
        },
        {
          title: "Налоговое планирование",
          description: "Планирование и расчеты налогов и отчетности",
        },
        {
          title: "Финансовая отчетность",
          description: "Отчетность по национальным и международным стандартам",
        },
        {
          title: "Государственная регистрация",
          description: "Полное сопровождение процедур регистрации",
        },
        {
          title: "Документооборот",
          description: "Надежная организация потоков документов",
        },
        {
          title: "Внутренний аудит",
          description: "Оценка контроля и управления рисками",
        },
      ],
    },
    about: {
      heading: "О компании",
      description:
        "TITANYAN Acc & Internal Audit предоставляет высококлассные услуги бухгалтерского учета и внутреннего аудита по всей Армении. Наша команда объединяет местных специалистов и сертифицированных экспертов международного уровня, обеспечивая точные расчеты, налоговую соответствие и прозрачную отчетность.",
      highlight1: "Обслуживание государственных и частных организаций",
      highlight2: "Фокус на контроле, рисках и прозрачности",
      highlight3: "Персональный подход к каждому клиенту",
    },
    founder: {
      name: "Арам Титанян",
      heading: "Слово основателя",
      role: "Основатель, TITANYAN Acc & Internal Audit LLC",
      bio: "Арам Титанян руководит компанией, уделяя внимание дисциплинированному учету, внутреннему аудиту и практическому консалтингу для организаций в Армении. Он вместе с клиентами выстраивает соответствующие требованиям процессы и прозрачную отчетность.",
      quote:
        "«Бухгалтерия — невидимая сила бизнеса, которая защищает вас от неожиданных потерь»",
      cta: "Назначить встречу",
    },
    contact: {
      heading: "Контакты",
      addressLabel: "Адрес",
      addressValue: "г. Ереван, Аршакуньяц 5, Армения",
      phoneLabel: "Тел.",
      emailLabel: "Эл. почта",
    },
    footer: {
      copyright:
        "© {{year}} TITANYAN Acc & Internal Audit. Все права защищены.",
    },
  },
};

document.addEventListener("DOMContentLoaded", () => {
  const languageButtons = document.querySelectorAll(".language-switcher button");
  const servicesGrid = document.getElementById("services-grid");
  const testimonialsGrid = document.getElementById("testimonials-grid");
  const defaultLang = "hy";
  const currentYear = new Date().getFullYear();
  let currentLang = defaultLang;

  const applyTranslations = (lang) => {
    const elements = document.querySelectorAll("[data-i18n]");

    elements.forEach((el) => {
      const key = el.getAttribute("data-i18n");
      const translation = resolveTranslation(lang, key);

      if (typeof translation === "string") {
        if (key === "footer.copyright" && translation.includes("{{year}}")) {
          el.textContent = translation.replace("{{year}}", currentYear);
        } else {
          el.textContent = translation;
        }
      }
    });

    renderServices(lang);
    renderTestimonials(lang);
  };

  const renderServices = (lang) => {
    const items = resolveTranslation(lang, "services.items");

    if (!Array.isArray(items)) {
      servicesGrid.innerHTML = "";
      return;
    }

    servicesGrid.innerHTML = items
      .map((item) => {
        const title = sanitizeHTML(item.title);
        const description = item.description
          ? `<p class="service-secondary">${sanitizeHTML(item.description)}</p>`
          : "";

        return `<article class="service-card">
            <h3>${title}</h3>
            ${description}
          </article>`;
      })
      .join("");
  };

  const renderTestimonials = (lang) => {
    if (!testimonialsGrid) return;

    const items = resolveTranslation(lang, "testimonials.items");
    if (!Array.isArray(items)) {
      testimonialsGrid.innerHTML = "";
      return;
    }

    testimonialsGrid.innerHTML = items
      .map((item) => {
        const name = sanitizeHTML(item.name || "");
        const role = sanitizeHTML(item.role || "");
        const quote = sanitizeHTML(item.quote || "");

        return `<article class="testimonial-card">
            <div class="testimonial-quote">${quote}</div>
            <div class="testimonial-meta">
              <span class="testimonial-name">${name}</span>
              <span class="testimonial-role">${role}</span>
            </div>
          </article>`;
      })
      .join("");
  };

  const switchLanguage = (lang) => {
    if (!translations[lang] || lang === currentLang) {
      return;
    }

    currentLang = lang;
    document.documentElement.setAttribute("lang", lang);
    languageButtons.forEach((btn) =>
      btn.classList.toggle("active", btn.dataset.lang === lang)
    );
    applyTranslations(lang);
  };

  languageButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const selectedLang = button.dataset.lang;
      switchLanguage(selectedLang);
    });
  });

  applyTranslations(defaultLang);
});

function resolveTranslation(lang, key) {
  return key.split(".").reduce((acc, part) => {
    if (acc && Object.prototype.hasOwnProperty.call(acc, part)) {
      return acc[part];
    }
    return undefined;
  }, translations[lang]);
}

function sanitizeHTML(value) {
  const temp = document.createElement("div");
  temp.textContent = value;
  return temp.innerHTML;
}
